{
  "version": 3,
  "sources": ["empty-module:../services/upload-handler.server", "../../../app/routes/add-event.jsx"],
  "sourcesContent": ["module.exports = {};", "// REMIX HMR BEGIN\nif (!window.$RefreshReg$ || !window.$RefreshSig$ || !window.$RefreshRuntime$) {\n  console.warn('remix:hmr: React Fast Refresh only works when the Remix compiler is running in development mode.');\n} else {\n  var prevRefreshReg = window.$RefreshReg$;\n  var prevRefreshSig = window.$RefreshSig$;\n  window.$RefreshReg$ = (type, id) => {\n    window.$RefreshRuntime$.register(type, \"\\\"app/routes/add-event.jsx\\\"\" + id);\n  }\n  window.$RefreshSig$ = window.$RefreshRuntime$.createSignatureFunctionForTransform;\n}\nvar _s = $RefreshSig$();\nimport * as __hmr__ from \"remix:hmr\";\nif (import.meta) {\n  import.meta.hot = __hmr__.createHotContext(\n  //@ts-expect-error\n  \"app/routes/add-event.jsx\");\n  import.meta.hot.lastModified = \"1710189078504.178\";\n}\n// REMIX HMR END\n\nimport { redirect } from \"@remix-run/node\";\nimport { Form, useNavigate, json } from \"@remix-run/react\";\nimport mongoose, { set } from \"mongoose\";\nimport { useState } from \"react\";\nimport { useLoaderData } from \"@remix-run/react\";\nimport { authenticator } from \"../services/auth.server\";\nimport { uploadImage } from \"../services/upload-handler.server\";\nimport Calendar from \"../components/Calendar\";\nexport const meta = () => {\n  return [{\n    title: \"Add new meetup\"\n  }];\n};\nexport async function loader({\n  request\n}) {\n  const user = await authenticator.isAuthenticated(request, {\n    failureRedirect: \"/events\"\n  });\n  return json({\n    user\n  });\n}\nexport default function AddEvent({\n  entry\n}) {\n  _s();\n  const [image, setImage] = useState(entry?.image ? entry?.image : null);\n  const [selectedDate, setSelectedDate] = useState(null);\n  const [location, setLocation] = useState(\"\");\n  const {\n    user\n  } = useLoaderData();\n  const handleDateClick = date => {\n    setSelectedDate(date);\n  };\n  const handleLocationChange = location => {\n    setLocation(location);\n  };\n  function handleImageChange(event) {\n    const file = event.target.files[0];\n    if (file.size < 500000) {\n      // image file size must be below 0,5MB\n      const reader = new FileReader();\n      reader.onload = e => {\n        setImage(e.target.result);\n      };\n      reader.readAsDataURL(file);\n    } else {\n      alert(\"Image size must be less than 0.5MB.\");\n      event.target.value = \"\";\n    }\n  }\n  return <>\n      <h1 className=\"text-3xl font-bold text-black mt-10 mb-4 text-center\">\n        Create A New Meetup\n      </h1>\n      <Form method=\"post\" className=\"mt-4 flex-col items-center justify-center\" encType=\"multipart/form-data\">\n        <div id=\"upper-div\" className=\"flex justify-center mt-8\">\n          <div id=\"text-div\" className=\"w-full flex flex-col justify-center ml-10 mr-10\">\n            <label className=\"block text-lg mb-2 text-gray-700 text-center\">\n              Title\n            </label>\n            <input id=\"title\" type=\"text\" name=\"title\" className=\"block w-full rounded-md border-0 bg-slate-100 py-1.5 text-black shadow-sm ring-1 ring-inset ring-white/10 focus:ring-2 focus:ring-inset focus:ring-indigo-500 sm:text-sm sm:leading-6\" />\n            <label className=\"block text-lg mb-2 text-gray-700 text-center mt-2\" htmlFor=\"text\">\n              Description\n            </label>\n            <textarea id=\"text\" name=\"description\" className=\"block w-full rounded-md border-0 bg-slate-100 py-1.5 text-black shadow-sm ring-1 ring-inset ring-white/10 focus:ring-2 focus:ring-inset focus:ring-indigo-500 sm:text-sm sm:leading-6\"></textarea>\n\n            <label className=\"block text-lg mb-2 text-gray-700 text-center mt-2\">\n              Location\n            </label>\n            <input id=\"location\" type=\"adress\" name=\"location\" className=\"block w-full rounded-md border-0 bg-slate-100 py-1.5 text-black shadow-sm ring-1 ring-inset ring-white/10 focus:ring-2 focus:ring-inset focus:ring-indigo-500 sm:text-sm sm:leading-6\" />\n          </div>\n          <div id=\"image-div\" className=\"w-full flex justify-center mt-10\">\n            <input className=\"hidden\" id=\"file_input\" name=\"image\" type=\"file\" onChange={handleImageChange} />\n            <img id=\"image-preview\" className=\"cursor-pointer w-72 h-60 object-cover rounded-lg\" src={image ? image : \"https://placehold.co/600x400/F1F5F9/000000?text=Upload+an+image\"} alt=\"Choose\" onError={e => e.target.src = \"https://placehold.co/600x400?text=Error+loading+image\"} onClick={() => document.getElementById(\"file_input\").click()} />\n          </div>\n        </div>\n        <input name=\"creator\" type=\"hidden\" value={user._id ?? \"\"} />\n        <div className=\"mt-6 flex items-center\">\n          <Calendar className=\"ml-20 w-full\" onDateClick={handleDateClick} />\n          <input name=\"date\" type=\"hidden\" value={selectedDate ?? \"\"} />\n\n          <div className=\"ml-8 flex flex-col items-center w-full\">\n            <label className=\"block text-lg mb-2 text-gray-700 text-center\" htmlFor=\"time\">\n              Time\n            </label>\n\n            <input id=\"time\" type=\"time\" name=\"time\" defaultValue=\"00:00\" className=\"p-3 border border-gray-300 rounded\" />\n          </div>\n        </div>\n\n        <div className=\"flex justify-center\">\n          <button type=\"submit\" className=\"mt-6  p-3 bg-blue-500 text-white rounded cursor-pointer text-center\">\n            Create Meetup\n          </button>\n        </div>\n      </Form>\n    </>;\n}\n//AIzaSyDxB8JlcODiXcIEfBxtAZNYcp3Sj-3ce4o\n_s(AddEvent, \"aqej1XIE1Nb/SMiAhZoLUyQ/6Iw=\", false, function () {\n  return [useLoaderData];\n});\n_c = AddEvent;\nexport async function action({\n  request\n}) {\n  //get form data from request\n  const formData = await request.formData();\n  const {\n    time,\n    date,\n    image,\n    title,\n    description,\n    creator,\n    location\n  } = Object.fromEntries(formData);\n\n  // Check for the presence and types of the text fields\n  if (typeof date !== \"string\" || typeof title !== \"string\" || typeof description !== \"string\" || typeof time !== \"string\" || !image // Directly check for file presence, no need to check type\n  ) {\n    throw new Error(\"Bad request\");\n  }\n\n  // Assuming imageFile is a File object now, we can properly work with it\n  if (image instanceof File) {\n    // Ensure imageFile is handled as a File\n    const imageUrl = await uploadImage(image);\n    const event = new mongoose.models.Event({\n      date: date,\n      title,\n      image: imageUrl,\n      description,\n      location,\n      creator\n    });\n    const isSaved = await event.save();\n    if (isSaved) {\n      return redirect(\"/events\");\n    } else {\n      throw new Error(\"Failed to save event\");\n    }\n  } else {\n    throw new Error(\"Image file is missing or invalid\");\n  }\n}\nvar _c;\n$RefreshReg$(_c, \"AddEvent\");\n\nwindow.$RefreshReg$ = prevRefreshReg;\nwindow.$RefreshSig$ = prevRefreshSig;"],
  "mappings": "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",
  "names": ["import_react", "location"]
}
